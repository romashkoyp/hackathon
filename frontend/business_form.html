<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Assessment Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background:
                linear-gradient(135deg, rgba(245, 247, 250, 0.95) 0%, rgba(230, 235, 245, 0.95) 100%),
                repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(102, 126, 234, 0.03) 35px, rgba(102, 126, 234, 0.03) 70px);
            background-attachment: fixed;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background:
                linear-gradient(135deg, rgba(102, 126, 234, 0.85) 0%, rgba(118, 75, 162, 0.85) 100%),
                url('public/a22b612d-bcf0-4b45-89a6-145104a53d2a.jpg');
            background-size: cover;
            background-position: center;
            background-blend-mode: multiply;
            color: white;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .form-container {
            padding: 40px;
        }
        
        .form-section { 
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        
        .form-section h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.8em;
            font-weight: 600;
        }
        
        .form-section h3 {
            color: #555;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .form-group { 
            margin-bottom: 20px;
        }
        
        .inline-group {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .inline-group label {
            flex: 1;
            margin-bottom: 0;
        }
        
        .inline-group input {
            flex: 0 0 200px;
        }
        
        label { 
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
            font-size: 0.95em;
        }
        
        input, textarea, select { 
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .required:after { 
            content: " *";
            color: #e74c3c;
            font-weight: bold;
        }
        
        .checkbox-group {
            display: flex;
            align-items: start;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.2s ease;
        }
        
        .checkbox-group:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .checkbox-label { 
            font-weight: normal;
            color: #555;
            line-height: 1.5;
            cursor: pointer;
            margin: 0;
        }
        
        .api-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #856404;
        }
        
        .submit-btn { 
            width: 100%;
            padding: 18px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        #results { 
            margin-top: 30px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #28a745;
            display: none;
        }
        
        #results h2 {
            color: #28a745;
            margin-bottom: 20px;
        }
        
        .loading { 
            text-align: center;
            display: none;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 12px;
            margin: 30px 0;
        }
        
        .loading p {
            font-size: 1.2em;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .form-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Business Assessment Questionnaire</h1>
            <p>Complete the form below to receive a comprehensive assessment of your business</p>
        </div>
        
        <div class="form-container">
            <div class="loading" id="loadingIndicator">
                <p>Processing your request... This may take a moment.</p>
                <img src="https://i.gifer.com/ZKZg.gif" alt="Loading" width="50">
            </div>
            
            <form id="businessForm">
                <div class="form-section">
                    <h2>Basic Information</h2>
                    <div class="form-group">
                        <label class="required" for="businessType">1. Type of business:</label>
                        <input type="text" id="businessType" name="businessType" required placeholder="e.g., Retail, Consulting, Manufacturing">
                    </div>
                    
                    <div class="form-group">
                        <label for="location">2. Where is it located?</label>
                        <input type="text" id="location" name="location" placeholder="City, Country">
                    </div>
                    
                    <div class="form-group">
                        <label for="website">3. Website:</label>
                        <input type="url" id="website" name="website" placeholder="https://www.example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="presentation">4. Presentation:</label>
                        <textarea id="presentation" name="presentation" rows="3" placeholder="Brief description of your business..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="operationPeriod">5. Period of operation on market:</label>
                        <input type="text" id="operationPeriod" name="operationPeriod" placeholder="e.g., 5 years">
                    </div>
                    
                    <div class="form-group">
                        <label class="required" for="saleTime">6. When are you going to sell your company?</label>
                        <input type="text" id="saleTime" name="saleTime" required placeholder="e.g., Within 6 months, 1-2 years">
                    </div>
                </div>
                
                <div class="form-section">
                    <h2>SDE Calculation</h2>
                    <div class="form-group inline-group">
                        <label class="required" for="netProfit">Net Profit (before tax):</label>
                        <input type="number" id="netProfit" name="netProfit" required placeholder="0">
                    </div>
                    
                    <div class="form-group inline-group">
                        <label for="ownerSalary">Your Total Annual Salary/Compensation:</label>
                        <input type="number" id="ownerSalary" name="ownerSalary" placeholder="0">
                    </div>
                    
                    <div class="form-group inline-group">
                        <label for="personalExpenses">Personal Expenses Paid by Business:</label>
                        <input type="number" id="personalExpenses" name="personalExpenses" placeholder="0">
                    </div>
                    
                    <div class="form-group inline-group">
                        <label for="unusualExpenses">One-Time or Unusual Expenses:</label>
                        <input type="number" id="unusualExpenses" name="unusualExpenses" placeholder="0">
                    </div>
                    
                    <div class="form-group inline-group">
                        <label for="interest">Interest Paid on Business Loans:</label>
                        <input type="number" id="interest" name="interest" placeholder="0">
                    </div>
                    
                    <div class="form-group inline-group">
                        <label for="depreciation">Depreciation and Amortization:</label>
                        <input type="number" id="depreciation" name="depreciation" placeholder="0">
                    </div>
                </div>
                
                <div class="form-section">
                    <h2>Business Assessment</h2>
                    
                    <h3>A. The Entrepreneur</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="unanimousDecision" name="unanimousDecision">
                        <label for="unanimousDecision" class="checkbox-label">The owners are unanimous about selling the company or the entrepreneur has made a genuine decision to sell the company.</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="replaceableRole" name="replaceableRole">
                        <label for="replaceableRole" class="checkbox-label">The entrepreneur's role in the company is easily replaceable.</label>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">Submit for Assessment</button>
            </form>
            
            <div id="results">
                <h2>Assessment Results</h2>
                <div id="resultContent"></div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('businessForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Show loading indicator
            document.getElementById('loadingIndicator').style.display = 'block';
            
            // Get form data
            const formData = new FormData(this);
            const formObject = {};
            formData.forEach((value, key) => {
                formObject[key] = value;
            });
            
            // Calculate SDE
            const sde = (parseFloat(formObject.netProfit) || 0) + 
                      (parseFloat(formObject.ownerSalary) || 0) +
                      (parseFloat(formObject.personalExpenses) || 0) +
                      (parseFloat(formObject.unusualExpenses) || 0) +
                      (parseFloat(formObject.interest) || 0) +
                      (parseFloat(formObject.depreciation) || 0);
            
            formObject.sdeTotal = sde;
            
            // Get checkboxes
            const checkboxes = document.querySelectorAll('input[type=checkbox]');
            checkboxes.forEach(checkbox => {
                formObject[checkbox.id] = checkbox.checked;
            });
            
            // Format the content for the API
            const content = `
                Business Assessment Information:
                
                Basic Information:
                - Type of business: ${formObject.businessType}
                - Location: ${formObject.location || "Not provided"}
                - Website: ${formObject.website || "Not provided"}
                - Presentation: ${formObject.presentation || "Not provided"}
                - Period of operation: ${formObject.operationPeriod || "Not provided"}
                - Planned sale time: ${formObject.saleTime}
                
                SDE Calculation:
                - Net Profit: €${formObject.netProfit || 0}
                - Owner Salary: €${formObject.ownerSalary || 0}
                - Personal Expenses: €${formObject.personalExpenses || 0}
                - Unusual Expenses: €${formObject.unusualExpenses || 0}
                - Interest: €${formObject.interest || 0}
                - Depreciation: €${formObject.depreciation || 0}
                - Total SDE: €${sde}
                
                Assessment Checklist:
                - Unanimous sale decision: ${formObject.unanimousDecision ? "Yes" : "No"}
                - Entrepreneur role replaceable: ${formObject.replaceableRole ? "Yes" : "No"}
            `;
            
            try {
                // Call the Google API directly (not recommended for production due to API key exposure)
                const apiKey = 'YOUR_API_KEY_HERE'; // Replace with your actual API key or backend endpoint
                
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=' + apiKey, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: content
                            }]
                        }],
                        systemInstruction: {
                            parts: [{
                                text: `You are a business valuation expert. Analyze the provided business information and provide:
                                1. An estimated valuation range based on SDE and typical industry multipliers
                                2. Key strengths identified from the assessment
                                3. Areas of concern or improvement
                                4. Recommendations for increasing business value before sale
                                
                                Format your response as HTML that can be directly inserted into a webpage.`
                            }]
                        }
                    })
                });
                
                const data = await response.json();
                
                // Hide loading indicator
                document.getElementById('loadingIndicator').style.display = 'none';
                
                // Show results
                document.getElementById('results').style.display = 'block';
                document.getElementById('resultContent').innerHTML = 
                    data.candidates[0].content.parts[0].text;
                    
            } catch (error) {
                console.error('Error:', error);
                // Hide loading indicator
                document.getElementById('loadingIndicator').style.display = 'none';
                
                // Show error in results
                document.getElementById('results').style.display = 'block';
                document.getElementById('resultContent').innerHTML = 
                    `<p style="color: red">Error: ${error.message}</p>
                     <p>This could be due to:</p>
                     <ul>
                        <li>Invalid API key</li>
                        <li>CORS restrictions</li>
                        <li>API rate limiting</li>
                     </ul>
                     <p>Consider implementing a backend service to make API calls securely.</p>`;
            }
        });
    </script>
</body>
</html>